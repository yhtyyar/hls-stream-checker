# –í–µ–± API HLS Stream Checker

## –û–±–∑–æ—Ä

–í–µ–± API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–æ–π HLS –ø–æ—Ç–æ–∫–æ–≤ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ HTTP –∑–∞–ø—Ä–æ—Å—ã.

## –ë–∞–∑–æ–≤—ã–π URL

```
http://localhost:5000/api
```

## Endpoint'—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è API

**GET** `/api/health`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ API —Å–µ—Ä–≤–µ—Ä–∞.

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "timestamp": "2025-09-11T10:30:00",
  "isChecking": false,
  "uptime": 120.5
}
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**GET** `/api/config`

–ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–û—Ç–≤–µ—Ç:**
```json
{
  "defaultChannelCount": "all",
  "defaultDurationMinutes": 5,
  "defaultRefreshPlaylist": false,
  "defaultExportData": true,
  "requestTimeout": 20,
  "maxRetries": 3,
  "serviceCheckInterval": 60
}
```

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏

**POST** `/api/check`

–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É HLS –ø–æ—Ç–æ–∫–æ–≤ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "channelCount": "5",
  "duration": 3,
  "refreshPlaylist": true,
  "exportData": true,
  "monitorInterval": 30
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "started",
  "message": "–ü—Ä–æ–≤–µ—Ä–∫–∞ HLS –ø–æ—Ç–æ–∫–æ–≤ –Ω–∞—á–∞—Ç–∞"
}
```

### 4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

**POST** `/api/check/stop`

–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ø—Ä–æ–≤–µ—Ä–∫—É HLS –ø–æ—Ç–æ–∫–æ–≤.

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "stopped",
  "message": "–ü—Ä–æ–≤–µ—Ä–∫–∞ HLS –ø–æ—Ç–æ–∫–æ–≤ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
}
```

### 5. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

**GET** `/api/check/status`

–ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏.

**–û—Ç–≤–µ—Ç:**
```json
{
  "isChecking": true,
  "isProcessRunning": true,
  "logLines": 45,
  "uptime": 120.5
}
```

### 6. –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤

**GET** `/api/logs?limit=50&offset=0`

–ü–æ–ª—É—á–∞–µ—Ç –ª–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100)
- `offset` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –°–º–µ—â–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)

**–û—Ç–≤–µ—Ç:**
```json
{
  "logs": [
    "[2025-09-11 10:30:01] üöÄ –ù–ê–ß–ê–õ–û –ü–†–û–í–ï–†–ö–ò HLS –ö–ê–ù–ê–õ–û–í",
    "[2025-09-11 10:30:02] üìÑ –í—Å–µ–≥–æ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏: 5"
  ],
  "total": 45,
  "limit": 50,
  "offset": 0
}
```

### 7. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**GET** `/api/data/latest`

–ü–æ–ª—É—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

**–û—Ç–≤–µ—Ç:**
```json
{
  "analytics": {
    "overall_analysis": {
      "success_rate": 92.5,
      "total_errors": 3
    }
  },
  "session": {
    "id": "20250911_103000",
    "start_time": "2025-09-11T10:30:00",
    "end_time": "2025-09-11T10:35:00"
  },
  "summary": {
    "total_channels": 20,
    "completed_channels": 18,
    "overall_success_rate": 92.78
  },
  "channels": [
    {
      "name": "Al Jazeera ÿßŸÑÿ¨ÿ≤Ÿäÿ±ÿ©",
      "stats": {
        "success_rate": 100.0,
        "total_data_mb": 12.5
      }
    }
  ]
}
```

### 8. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–∞–Ω–Ω—ã—Ö

**GET** `/api/data/files`

–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

**–û—Ç–≤–µ—Ç:**
```json
{
  "csv": [
    {
      "name": "hls_channels_final_stats_20250911_103000.csv",
      "path": "/data/csv/hls_channels_final_stats_20250911_103000.csv",
      "size": 2048,
      "modified": "2025-09-11T10:35:00"
    }
  ],
  "json": [
    {
      "name": "hls_api_report_20250911_103000.json",
      "path": "/data/json/hls_api_report_20250911_103000.json",
      "size": 1024,
      "modified": "2025-09-11T10:35:00"
    }
  ]
}
```

### 9. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –¥–∞–Ω–Ω—ã—Ö

**GET** `/data/<filename>`

–°–∫–∞—á–∏–≤–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–∞–Ω–Ω—ã—Ö.

**–ü—Ä–∏–º–µ—Ä:**
```
GET /data/json/hls_api_report_20250911_103000.json
```

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- `200`: –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `400`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `404`: –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500`: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å Python

```python
import requests

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏
response = requests.post('http://localhost:5000/api/check', json={
    'channelCount': '5',
    'duration': 3,
    'refreshPlaylist': True
})

if response.status_code == 200:
    print("–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—á–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ")
else:
    print(f"–û—à–∏–±–∫–∞: {response.status_code}")
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Å JavaScript

```javascript
fetch('/api/data/latest')
    .then(response => response.json())
    .then(data => {
        console.log(`–û–±—â–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞: ${data.summary.overall_success_rate}%`);
    })
    .catch(error => {
        console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:', error);
    });
```